@model ChamadoViewModel;
@{

}



    <div class=" bg-white p-3 rounded container mt-5">
      <h3 class="">Cadastro de chamados</h3>
        <form asp-action="Create">
            <div class="row">
            <div class="col-md-5 col-12">
                <div class="container p-3">
                    <h5>Motivo</h5>
                       <select asp-for="NovoChamado.MotivoId" id="motivoSelect" class="form-select">
                            <option value="">Selecione um motivo</option>
                            @foreach (var motivo in Model.Motivos)
                            {
                                <option value="@motivo.Id">@motivo.Nome</option>
                            }
                            </select>
              <h5 class="mt-3">Complemento</h5>
                        <select asp-for="NovoChamado.ComplementoId" id="complementoSelect" class="form-select">
                            <option value="">Selecione um complemento</option>
                             @foreach(var complemento in Model.Complementos){
                                         <option value="@complemento.Id" data-motivoid="@complemento.MotivoId">@complemento.Nome</option>
                             }
                            <!-- Os complementos serão adicionados dinamicamente via JavaScript --> 
                        </select>
            </div>
            </div>

            <div class="col-md-2">
                <div class="container p-3">
                    <h5>Urgência</h5>
             <div class="form-check">
   <input asp-for="NovoChamado.Urgencia" value="Minima" class="form-check-input" type="radio" id="flexRadioDefault1">
   <label class="form-check-label" for="flexRadioDefault1">
     Mínima
   </label>
</div>
<div class="form-check">
   <input asp-for="NovoChamado.Urgencia" value="Baixa" class="form-check-input" type="radio" id="flexRadioDefault2">
   <label class="form-check-label" for="flexRadioDefault2">
     Baixa
   </label>
</div>
<div class="form-check">
   <input asp-for="NovoChamado.Urgencia" value="Moderada" class="form-check-input" type="radio" id="flexRadioDefault3">
   <label class="form-check-label" for="flexRadioDefault3">
     Moderada
   </label>
</div>
<div class="form-check">
   <input asp-for="NovoChamado.Urgencia" value="Alta" class="form-check-input" type="radio" id="flexRadioDefault4">
   <label class="form-check-label" for="flexRadioDefault4">
     Alta
   </label>
</div>
<div class="form-check">
   <input asp-for="NovoChamado.Urgencia" value="Maxima" class="form-check-input" type="radio" id="flexRadioDefault5">
   <label class="form-check-label" for="flexRadioDefault5">
     Máxima
   </label>
</div>

            </div>
            </div>
            <div class="col-md-5 col-12 ">
                <div class="form-floating p-3">
                  <h5>Observações</h5>
                  <textarea asp-for="NovoChamado.Observacoes" class="form-control" placeholder="Leave a comment here" id="floatingTextarea2" style="height:166px"></textarea>
                </div>
              </div>

        </div>


          <div class="gap-2 mt-2 d-flex justify-content-end pe-3">

                <input type="submit" value="Enviar" class="btn btn-primary" />
                <input type="submit" value="Limpar" class="btn btn-secondary text-white" />
            </div>
        </form>

</div>


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function() {
        // Quando o motivo for alterado
        $('#motivoSelect').on('change', function() {
            var selectedMotivoId = $(this).val(); // Pega o ID do motivo selecionado

            // Esconde todos os complementos
            $('#complementoSelect option').hide();

            // Mostra apenas os complementos que têm o motivoId igual ao selecionado
            $('#complementoSelect option[data-motivoid="' + selectedMotivoId + '"]').show();

            // Selecione a opção padrão "Selecione um complemento"
            $('#complementoSelect').val('');
        });

        // Quando a página carregar, esconder todos os complementos inicialmente
        $('#complementoSelect option[data-motivoid]').hide();
    });
</script>

